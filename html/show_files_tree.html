<!doctype html>
<html lang="zh-cmn-Hans">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, shrink-to-fit=no" />
  <meta name="renderer" content="webkit" />
  <meta name="force-rendering" content="webkit" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  
  <!-- ICON start -->
  <link rel="apple-touch-icon" sizes="76x76" href="/static/icon/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/static/icon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/static/icon/favicon-16x16.png">
  <link rel="icon" href="/static/favicon.ico">
  <link rel="manifest" href="/static/icon/site.webmanifest">
  <link rel="mask-icon" href="/static/icon/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="theme-color" content="#ffffff">
  <!-- ICON end -->
  
  
  <!-- MDUI CSS -->
  <link rel="stylesheet" href="https://js-457d9eeb-fcfe-4d6e.dayi.cool/npm/mdui@1.0.2/dist/css/mdui.min.css" />
  <title>文件目录</title>
  <!-- MDUI CSS -->
</head>

<body>
  <!-- <h1>Hello, world!</h1> -->

  <div class="mdui-appbar">
    <div class="mdui-toolbar mdui-color-indigo">
      <a href="javascript:" class="mdui-btn mdui-btn-icon"><i class="mdui-icon material-icons">menu</i></a>
      <a href="javascript:" class="mdui-typo-headline">MDUI</a>
      <a href="javascript:" class="mdui-typo-title">文件目录</a>
      <div class="mdui-toolbar-spacer"></div>
      <a href="javascript:" class="mdui-btn mdui-btn-icon"><i class="mdui-icon material-icons">search</i></a>
      <a href="javascript:" class="mdui-btn mdui-btn-icon"><i class="mdui-icon material-icons">refresh</i></a>
      <a href="javascript:" class="mdui-btn mdui-btn-icon"><i class="mdui-icon material-icons">more_vert</i></a>
    </div>
  </div>


  <br>
  <div class="mdui-typo">
    <pre id="dayi_for_debug_info">这里是调试信息:<br></pre>
  </div>
  <br><br><br><br>
  <div class="mdui-container-fluid">
    工具栏（又不是不能用.jpg）:
    <br>

    <a href="/" target="_blank">
      <button class="mdui-btn mdui-btn-raised mdui-ripple">回到主页</button>
    </a>

    <a href="/tree/showme.php" target="_blank">
      <button class="mdui-btn mdui-btn-raised mdui-ripple">点我查看服务器文件</button>
    </a>
    <a>       </a>
    <a href="/showfiles" target="_blank">
      <button class="mdui-btn mdui-btn-raised mdui-ripple" id="shamate" ><b>自助管理/删除上传的文件</b></button>
    </a>
    <a > ←dayi写了好久好久最后实现的功能，真的写吐了 <a>
  </div>

  <script>
    async function log_it(str) {
      t = document.getElementById('dayi_for_debug_info')
      now_time = new Date(Date.now()).toLocaleTimeString({})
      t.innerHTML += `[${(now_time)}]` + str + '\n';
    }
    async function fetch_tree() {
      try {
        const response = await fetch('/api/get_file_tree', { method: 'GET' });
        const data = await response.text();
        return data;
      } catch (error) {
        console.error(error);
      }
    }

    async function auto_login() {
      log_it('由于重构了整个项目，所以如果遇到bug，请及时联系dayi')
      
      log_it('这个目录是包含【文件夹】的，不带扩展名的就是文件夹啦')
      log_it('【预览/下载】 文件 请到【自助管理】点击下载')
      log_it('正在展示文件目录')
      try {
        const res_tree = await fetch_tree();
        log_it('\n'+res_tree);
      } catch (error) {
        console.error(error);
      }
      log_it('后期可能会添加 合并用户之类的功能,大家如果有其他方面的需求和建议也可以跟dayi说哦')
    }
    auto_login()

  </script>

  <!-- MDUI JavaScript -->
  <script src="https://js-457d9eeb-fcfe-4d6e.dayi.cool/npm/mdui@1.0.2/dist/js/mdui.min.js"></script>

</body>

</html>

</body>

</html>